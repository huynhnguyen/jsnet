<!DOCTYPE html>
<html>
<head>
	<title>Auto gradient</title>
	
</head>
<body><script type="text/javascript" src="/dist/lib/autograd.js"></script><script type="text/javascript" src="/dist/lib/operators.js"></script><script type="text/javascript" src="/dist/lib/number.js"></script></body>
<script type="text/javascript">
	(()=>{
		const Op = Autograd.Operators;
		console.warn( Date(), 'script start' );

		const gradOpt$1 = (func, ndA)=>{
			let grad = Autograd.grad( func );
			return grad(ndA);
			
		}
		let ndA    = Number([[0,1],[1,2]]);
		let [ndGrad, ndRet] = gradOpt$1( Operators.mean, ndA );
		console.table( ndGrad[0].tolist() );
		// console.table( ndRet.tolist() );
		// function test_grad_chain_2(){
		// 	let nb = Number([[2,1],[3,4]]);
		// 	console.table(nb.value);
		// 	let nb$add2  = Operators.add(nb, 4);
		// 	console.table(nb$add2.value);
		// 	function myFunc(nd){
		// 		let nd2 = Operators.tanh(nd);
		// 		// return Operators.tanh(nd2);
		// 		let nd3 = Operators.tanh(nd2);
		// 		return Operators.tanh(Operators.add(nd3,nd2));
		// 	}	
		// }
		
		// function test_grad_chain_1(){
		// 	let nb  = Number([ [2,1,-1],
		// 				   	   [3,4, 2] ]);
		// 	let nb2 = Number([ [2,1,1, 2],
		// 					   [-1,3,4,3],
		// 					   [4,2,2, 3] ]);
		// 	nb2.grad = false;
		// 	function myFunc(nd$1, nd$2){
		// 		return Operators.tanh(Operators.dot(nd$1,nd$2));
		// 	}
		// 	let grad = Autograd.grad(myFunc);
		// 	console.warn('gradient');
		// 	let [ _grad, _ret ] = grad(nb,nb2);
		// 	console.table( _grad );	
		// }

		// function test_grad_mean_square_error(){
		// 	let param  = Number([ 2,  1, -1 ]);
		// 	let x      = Number([ 2, -1,  4 ]);
		// 	let y = Number([ 2 ]);
		// 	x.grad = false;
		// 	y.grad = false;
		// 	function myFunc(y, x, param){
		// 		let y_predict = Operators.dot(param, x);
		// 		let error = Operators.pow( Operators.minus(y,y_predict), 2 );
		// 		console.warn( error );
		// 		return error;
		// 	}
		// 	console.warn('myFunc');
		// 	let grad = Autograd.grad(myFunc);
		// 	console.warn('gradient');
		// 	let [ _grad, _ret ] = grad(y, x, param);
		// 	console.table( _grad );	
		// }
		// test_grad_mean_square_error();
		
	})();
</script>
</html>