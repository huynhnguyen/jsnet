<!DOCTYPE html>
<html>
<head>
	<title>benchmark numberjs with mathjs</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/3.16.3/math.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
	<script src="/lib/vendor.min.js"></script>
	<script src="/lib/skynet.js"></script>
</head>
<body>
<section>dot</section>
<script type="text/javascript">
	(()=>{
		
		const ranGen = (dim)=> Math.random();
		console.log('script start');
		var d = math.matrix([[4,6,4,6],
							 [1,3,1,3]]);
		var e = math.matrix([[2,1],
							 [2,1],
							 [5,8],
							 [5,8]]);
		s = new Date();
		var f = math.multiply(d, e);
		r = new Date() - s;
		console.log(f);
		console.log('dot time', r, ' ms');
		const genMat = (r,c)=>_.range(r).map(()=>_.range(c).map(()=>Math.random()));
		function benchMark(shA,shB){
			let lA = genMat(20,30), lB = genMat(30,40);
			let matA = math.matrix(lA);
			let matB = math.matrix(lB);
			console.time('mul');
			let matV = math.multiply(matA, matB);
			console.timeEnd('mul');
			let ndA = Skynet.nb(lA);
			let ndB = Skynet.nb(lB);
			op_dot = Skynet.nb().dotF;
			console.time('skynet mul');
			let ndC = op_dot(ndA,ndB);
			console.timeEnd('skynet mul');	
		}
		benchMark([20,30],[30,40]);
		benchMark([40,60],[60,80]);
		benchMark([80,120],[120,160]);
	})();
</script>
</body>
</html>